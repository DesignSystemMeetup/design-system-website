const VERSION = "1.0.9";
const NAME = `design-system-meetup-${VERSION}`;

self
	.addEventListener( 'install', event => {

		event
			.waitUntil(
				caches
					.open( NAME )
					.then( cache => {
						return cache
							.addAll([
								'/',
								'/index.html',
								'/assets/css/site.min.css',
								'/assets/img/atlassian.png',
								'/assets/img/dta.png',
								'/assets/img/expert360.png',
								'/assets/img/invision.png',
								'/assets/img/og-image.jpg',
								'/assets/img/thinkmill.png',
								'/assets/img/tomwalker.png',
								'/assets/img/zip.png',
								'/assets/js/script.min.js',
								'/assets/svg/sprite.svg',
								'/code-of-conduct/index.html',
								'/v1.0.0/',
								'/v1.0.0/index.html',
								'/v2.0.0/',
								'/v2.0.0/index.html',
								'/v3.0.0/',
								'/v3.0.0/index.html',
							])
							.then( () => self.skipWaiting() )
				})
			);
});

self
	.addEventListener( 'activate', event => {
		event.waitUntil( self.clients.claim() );
});

self
	.addEventListener( 'fetch', event => {
		event
			.respondWith(
				caches
					.open( NAME )
					.then( cache => cache.match( event.request, { ignoreSearch: true } ) )
					.then( response => response || fetch( event.request ) )
			);
});
